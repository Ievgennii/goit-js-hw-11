{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,oDAOA,MAAMC,EAAeC,SAASC,cAAc,gBACtCC,EAAgBF,SAASC,cAAc,YACvCE,EAAgBH,SAASC,cAAc,cACvCG,EAAgBJ,SAASC,cAAc,cA0D7C,SAASI,EAAiBC,GACxB,MAAMC,EAAsCD,EAAKE,KAzBpCC,KAAIC,IAAQ,EAAAb,EAAAc,SAAiBD,KAAOE,KAAK,IA0BtDV,EAAcW,mBAAmB,YAAaN,GAChC,IAAIO,EAAAC,GAAJ,CAAmB,aAAc,CAAEC,aAAc,MACvDC,GAAG,sB,CA5DblB,EAAamB,iBAAiB,UAI9BC,eAAmCC,GACjC,IAKE,GAJAA,EAAMC,iBACNC,EAAAX,QAAQY,OAAOC,EAAIJ,EAAMK,OAAOC,SAASC,YAAYC,MAAMC,OAC3DP,EAAAX,QAAQY,OAAOO,KAAO,EACtB5B,EAAc6B,UAAY,GACM,IAA5BT,EAAAX,QAAQY,OAAOC,EAAEQ,OAEnB,YADAlB,EAAAmB,GAASC,OAAOC,KAAK,kDAGvB/B,EAAcgC,UAAUC,IAAI,aAC5BlC,EAAciC,UAAUC,IAAI,aAE5B,MAAM/B,KAAEA,SAAe,EAAAgC,EAAAC,cAAajB,EAAAX,SACpCG,EAAAmB,GAASC,OAAOC,KAAK,oBAAoB7B,EAAKkC,qBAC9CnC,EAAiBC,GA4DrB,SAAyBA,EAAMmC,GACzBnC,EAAKkC,UAAYC,EAAQlB,OAAOmB,SAClCvC,EAAciC,UAAUO,OAAO,aAE/BvC,EAAcgC,UAAUO,OAAO,Y,CA/D/BC,CAAgBtC,EAAMgB,EAAAX,Q,CACtB,MAAOkC,GACP1C,EAAciC,UAAUC,IAAI,aAC5BvB,EAAAmB,GAASC,OAAOC,KACd,2E,CAEH,QACCpC,EAAa+C,O,KA1BjB3C,EAAce,iBAAiB,SAkC/BC,iBACE,IACEG,EAAAX,QAAQY,OAAOO,MAAQ,EACvB,MAAMxB,KAAEA,SAAe,EAAAgC,EAAAC,cAAajB,EAAAX,SAEpC,GADAoC,QAAQC,IAAI1C,EAAKE,KAAKwB,SACjB1B,EAAKE,KAAKwB,OACb,MAAM,IAAIiB,MAEZ5C,EAAiBC,GAyBrB,WACE,MAAQ4C,OAAQC,GAAenD,SAC5BC,cAAc,YACdmD,kBAAkBC,wBAErBC,OAAOC,SAAS,CACdC,IAAkB,IAAbL,EACLM,SAAU,U,CA/BVC,E,CACA,MAAOb,GACP1C,EAAciC,UAAUC,IAAI,aAC5BjC,EAAcgC,UAAUO,OAAO,aAC/B7B,EAAAmB,GAASC,OAAOC,KACd,8DAEFb,EAAAX,QAAQY,OAAOO,KAAO,EACtB1B,EAAcgC,UAAUO,OAAO,Y,KAlDnCvC,EAAcc,iBAAiB,SA6D/B,WACEhB,EAAc6B,UAAY,GAC1B3B,EAAcgC,UAAUC,IAAI,Y","sources":["src/index.js"],"sourcesContent":["import templateFunction from './templates/template.hbs';\nimport Notiflix from 'notiflix';\nimport { fetchGallery } from './js/gallery-api';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport options from './js/options';\n\nconst galeryFormEl = document.querySelector('#search-form');\nconst galleryListEl = document.querySelector('.gallery');\nconst loadMoreBtnEl = document.querySelector('.load-more');\nconst clearAllBtnEl = document.querySelector('.clear-all');\n\ngaleryFormEl.addEventListener('submit', handleSearchGallery);\nloadMoreBtnEl.addEventListener('click', handleLoadMoreBtnClick);\nclearAllBtnEl.addEventListener('click', clearAll);\n\nasync function handleSearchGallery(event) {\n  try {\n    event.preventDefault();\n    options.params.q = event.target.elements.searchQuery.value.trim();\n    options.params.page = 1;\n    galleryListEl.innerHTML = '';\n    if (options.params.q.length === 0) {\n      Notiflix.Notify.info('you need to enter a word to search for a photo');\n      return;\n    }\n    clearAllBtnEl.classList.add('is-hidden');\n    loadMoreBtnEl.classList.add('is-hidden');\n\n    const { data } = await fetchGallery(options);\n    Notiflix.Notify.info(`Hooray! We found ${data.totalHits} images.`);\n    addImagesGallery(data);\n    checkBtnClasses(data, options);\n  } catch (error) {\n    loadMoreBtnEl.classList.add('is-hidden');\n    Notiflix.Notify.info(\n      'Sorry, there are no images matching your search query. Please try again.'\n    );\n  } finally {\n    galeryFormEl.reset();\n  }\n}\n\nfunction createImagesGallery(items) {\n  return items.map(item => templateFunction(item)).join('');\n}\n\nasync function handleLoadMoreBtnClick() {\n  try {\n    options.params.page += 1;\n    const { data } = await fetchGallery(options);\n    console.log(data.hits.length);\n    if (!data.hits.length) {\n      throw new Error();\n    }\n    addImagesGallery(data);\n    smoothScroll();\n  } catch (error) {\n    loadMoreBtnEl.classList.add('is-hidden');\n    clearAllBtnEl.classList.remove('is-hidden');\n    Notiflix.Notify.info(\n      \"We're sorry, but you've reached the end of search results.\"\n    );\n    options.params.page = 1;\n    clearAllBtnEl.classList.remove('is-hidden');\n  }\n}\n\nfunction addImagesGallery(data) {\n  const addImagesGalery = createImagesGallery(data.hits);\n  galleryListEl.insertAdjacentHTML('beforeend', addImagesGalery);\n  let gallery = new SimpleLightbox('.gallery a', { captionDelay: 250 });\n  gallery.on('show.simplelightbox');\n}\n\nfunction clearAll() {\n  galleryListEl.innerHTML = '';\n  clearAllBtnEl.classList.add('is-hidden');\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 1.5,\n    behavior: 'smooth',\n  });\n}\n\nfunction checkBtnClasses(data, options) {\n  if (data.totalHits > options.params.per_page) {\n    loadMoreBtnEl.classList.remove('is-hidden');\n  } else {\n    clearAllBtnEl.classList.remove('is-hidden');\n  }\n}\n"],"names":["$5MHIa","parcelRequire","$1f0dc3b9307be026$var$galeryFormEl","document","querySelector","$1f0dc3b9307be026$var$galleryListEl","$1f0dc3b9307be026$var$loadMoreBtnEl","$1f0dc3b9307be026$var$clearAllBtnEl","$1f0dc3b9307be026$var$addImagesGallery","data","addImagesGalery","hits","map","item","default","join","insertAdjacentHTML","$parcel$interopDefault","$fZKcF","captionDelay","on","addEventListener","async","event","preventDefault","$N0Xej","params","q","target","elements","searchQuery","value","trim","page","innerHTML","length","$7Y9D8","Notify","info","classList","add","$8hzAI","fetchGallery","totalHits","options1","per_page","remove","$1f0dc3b9307be026$var$checkBtnClasses","error","reset","console","log","Error","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","$1f0dc3b9307be026$var$smoothScroll"],"version":3,"file":"index.bd27b319.js.map"}