{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,8EAOMC,EAAeC,SAASC,cAAc,gBACtCC,EAAgBF,SAASC,cAAc,YACvCE,EAAgBH,SAASC,cAAc,cACvCG,EAAgBJ,SAASC,cAAc,c,SAM9BI,I,OAAAA,EAAfC,EAAAT,EAAA,CAAAS,EAAAC,GAAAC,MAAA,SAAAC,EAAmCC,G,IAavBC,E,8EAXRD,EAAME,iBACNC,EAAAC,QAAQC,OAAOC,EAAIN,EAAMO,OAAOC,SAASC,YAAYC,MAAMC,OAC3DR,EAAAC,QAAQC,OAAOO,KAAO,EACtBpB,EAAcqB,UAAY,GACM,IAA5BV,EAAAC,QAAQC,OAAOC,EAAEQ,OAAY,C,sBAC/BlB,EAAAmB,GAASC,OAAOC,KAAK,kD,iCAGvBvB,EAAcwB,UAAUC,IAAI,aAC5B1B,EAAcyB,UAAUC,IAAI,a,WAEL,EAAAC,EAAAC,cAAalB,EAAAC,S,QAA9BH,EAAMqB,EAAAC,KAAJtB,KACRL,EAAAmB,GAASC,OAAOC,KAAK,oBAAmCO,OAAfvB,EAAKwB,UAAU,aACxDC,EAAiBzB,GACjB0B,EAAgB1B,EAAME,EAAAC,S,kDAEtBX,EAAcyB,UAAUC,IAAI,aAC5BvB,EAAAmB,GAASC,OAAOC,KACd,4E,yBAGF5B,EAAauC,Q,8EAvBiBC,MAAAC,KAAAC,U,UA+BnBC,I,OAAAA,EAAfpC,EAAAT,EAAA,CAAAS,EAAAC,GAAAC,MAAA,SAAAC,I,IAGYE,E,kFADRE,EAAAC,QAAQC,OAAOO,MAAQ,E,UACA,EAAAQ,EAAAC,cAAalB,EAAAC,S,WAA9BH,EAAMqB,EAAAC,KAAJtB,MAEEgC,KAAKnB,OAAM,C,eACnB,MAAM,IAAIoB,M,OAEZR,EAAiBzB,GACjBkC,I,kDAEA1C,EAAcyB,UAAUC,IAAI,aAC5BzB,EAAcwB,UAAUkB,OAAO,aAC/BxC,EAAAmB,GAASC,OAAOC,KACd,8DAEFd,EAAAC,QAAQC,OAAOO,KAAO,EACtBlB,EAAcwB,UAAUkB,OAAO,a,2DAjBEP,MAAAC,KAAAC,U,CAqBrC,SAASL,EAAiBzB,GACxB,IAAMoC,EAAsCpC,EAAKgC,KAzBpCK,KAAI,SAAAC,G,OAAQ,EAAAC,EAAAC,SAAiBF,E,IAAOG,KAAK,IA0BtDlD,EAAcmD,mBAAmB,YAAaN,GAChC,IAAIzC,EAAAgD,GAAJ,CAAmB,aAAc,CAAEC,aAAc,MACvDC,GAAG,sB,CAQb,SAASX,IACP,IAAQY,EAAuBzD,SAC5BC,cAAc,YACdyD,kBAAkBC,wBAFbC,OAIRC,OAAOC,SAAS,CACdC,IAAkB,IAAbN,EACLO,SAAU,U,CAId,SAAS3B,EAAgB1B,EAAMsD,GACzBtD,EAAKwB,UAAY8B,EAAQlD,OAAOmD,SAClC/D,EAAcyB,UAAUkB,OAAO,aAE/B1C,EAAcwB,UAAUkB,OAAO,Y,CAnFnC/C,EAAaoE,iBAAiB,U,SAIKzD,G,OAApBL,EAAmBkC,MAAAC,KAAAC,U,IAHlCtC,EAAcgE,iBAAiB,S,kBAkChBzB,EAAsBH,MAAAC,KAAAC,U,IAjCrCrC,EAAc+D,iBAAiB,SA6D/B,WACEjE,EAAcqB,UAAY,GAC1BnB,EAAcwB,UAAUC,IAAI,Y","sources":["src/index.js"],"sourcesContent":["import templateFunction from './templates/template.hbs';\nimport Notiflix from 'notiflix';\nimport { fetchGallery } from './js/gallery-api';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport {options} from './js/options';\n\nconst galeryFormEl = document.querySelector('#search-form');\nconst galleryListEl = document.querySelector('.gallery');\nconst loadMoreBtnEl = document.querySelector('.load-more');\nconst clearAllBtnEl = document.querySelector('.clear-all');\n\ngaleryFormEl.addEventListener('submit', handleSearchGallery);\nloadMoreBtnEl.addEventListener('click', handleLoadMoreBtnClick);\nclearAllBtnEl.addEventListener('click', clearAll);\n\nasync function handleSearchGallery(event) {\n  try {\n    event.preventDefault();\n    options.params.q = event.target.elements.searchQuery.value.trim();\n    options.params.page = 1;\n    galleryListEl.innerHTML = '';\n    if (options.params.q.length === 0) {\n      Notiflix.Notify.info('you need to enter a word to search for a photo');\n      return;\n    }\n    clearAllBtnEl.classList.add('is-hidden');\n    loadMoreBtnEl.classList.add('is-hidden');\n\n    const { data } = await fetchGallery(options);\n    Notiflix.Notify.info(`Hooray! We found ${data.totalHits} images.`);\n    addImagesGallery(data);\n    checkBtnClasses(data, options);\n  } catch (error) {\n    loadMoreBtnEl.classList.add('is-hidden');\n    Notiflix.Notify.info(\n      'Sorry, there are no images matching your search query. Please try again.'\n    );\n  } finally {\n    galeryFormEl.reset();\n  }\n}\n\nfunction createImagesGallery(items) {\n  return items.map(item => templateFunction(item)).join('');\n}\n\nasync function handleLoadMoreBtnClick() {\n  try {\n    options.params.page += 1;\n    const { data } = await fetchGallery(options);\n    \n    if (!data.hits.length) {\n      throw new Error();\n    }\n    addImagesGallery(data);\n    smoothScroll();\n  } catch (error) {\n    loadMoreBtnEl.classList.add('is-hidden');\n    clearAllBtnEl.classList.remove('is-hidden');\n    Notiflix.Notify.info(\n      \"We're sorry, but you've reached the end of search results.\"\n    );\n    options.params.page = 1;\n    clearAllBtnEl.classList.remove('is-hidden');\n  }\n}\n\nfunction addImagesGallery(data) {\n  const addImagesGalery = createImagesGallery(data.hits);\n  galleryListEl.insertAdjacentHTML('beforeend', addImagesGalery);\n  let gallery = new SimpleLightbox('.gallery a', { captionDelay: 250 });\n  gallery.on('show.simplelightbox');\n}\n\nfunction clearAll() {\n  galleryListEl.innerHTML = '';\n  clearAllBtnEl.classList.add('is-hidden');\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 1.5,\n    behavior: 'smooth',\n  });\n}\n\nfunction checkBtnClasses(data, options) {\n  if (data.totalHits > options.params.per_page) {\n    loadMoreBtnEl.classList.remove('is-hidden');\n  } else {\n    clearAllBtnEl.classList.remove('is-hidden');\n  }\n}\n"],"names":["$bpxeT","parcelRequire","$b8f9b7833fa37166$var$galeryFormEl","document","querySelector","$b8f9b7833fa37166$var$galleryListEl","$b8f9b7833fa37166$var$loadMoreBtnEl","$b8f9b7833fa37166$var$clearAllBtnEl","$b8f9b7833fa37166$var$_handleSearchGallery","$parcel$interopDefault","$2TvXO","mark","_callee","event","data","preventDefault","$i0xjD","options","params","q","target","elements","searchQuery","value","trim","page","innerHTML","length","$6JpON","Notify","info","classList","add","$gsNEY","fetchGallery","_ctx","sent","concat","totalHits","$b8f9b7833fa37166$var$addImagesGallery","$b8f9b7833fa37166$var$checkBtnClasses","reset","apply","this","arguments","$b8f9b7833fa37166$var$_handleLoadMoreBtnClick","hits","Error","$b8f9b7833fa37166$var$smoothScroll","remove","addImagesGalery","map","item","$gQS4W","default","join","insertAdjacentHTML","$5IjG7","captionDelay","on","cardHeight","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","options1","per_page","addEventListener"],"version":3,"file":"index.2043d8e8.js.map"}