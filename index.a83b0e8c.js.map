{"mappings":"qhBAAA,IAAAA,EAAAC,EAAA,S,oDAOA,MAAMC,EAAeC,SAASC,cAAc,gBACtCC,EAAgBF,SAASC,cAAc,YACvCE,EAAgBH,SAASC,cAAc,cACvCG,EAAgBJ,SAASC,cAAc,cAkE7C,SAASI,EAAiBC,GACxB,MAAMC,EAAsCD,EAAKE,KAzBpCC,KAAIC,IAAQ,EAAAb,EAAAc,SAAiBD,KAAOE,KAAK,IA0BtDV,EAAcW,mBAAmB,YAAaN,GAChC,IAAIO,EAAAC,GAAJ,CAAmB,aAAc,CAAEC,aAAc,MACvDC,GAAG,sB,CApEblB,EAAamB,iBAAiB,UAI9BC,eAAmCC,GACjC,IACEA,EAAMC,iBACNC,EAAAC,QAAQC,OAAOC,EAAIL,EAAMM,OAAOC,SAASC,YAAYC,MAAMC,OAC3DR,EAAAC,QAAQC,OAAOO,KAAO,EACtB7B,EAAc8B,UAAY,GAO1B5B,EAAc6B,UAAUC,IAAI,aAC5B/B,EAAc8B,UAAUC,IAAI,aAE5B,MAAM5B,KAAEA,SAAe,EAAA6B,EAAAC,cAAad,EAAAC,SACpC,GAAuB,IAAnBjB,EAAK+B,WAA+C,IAA5Bf,EAAAC,QAAQC,OAAOC,EAAEa,OAI3C,YAHAxB,EAAAyB,GAASC,OAAOC,KACd,4EAIJ3B,EAAAyB,GAASC,OAAOC,KAAK,oBAAoBnC,EAAK+B,qBAC9ChC,EAAiBC,GA4DrB,SAAyBA,EAAMoC,GACzBpC,EAAK+B,UAAYK,EAAQlB,OAAOmB,SAClCxC,EAAc8B,UAAUW,OAAO,aAE/BxC,EAAc6B,UAAUW,OAAO,Y,CA/D/BC,CAAgBvC,EAAMgB,EAAAC,Q,CACtB,MAAOuB,GACP3C,EAAc8B,UAAUC,IAAI,aAC5BpB,EAAAyB,GAASC,OAAOC,KACd,2E,CAEH,QACC1C,EAAagD,O,KAlCjB5C,EAAce,iBAAiB,SA0C/BC,iBACE,IACEG,EAAAC,QAAQC,OAAOO,MAAQ,EACvB,MAAMzB,KAAEA,SAAe,EAAA6B,EAAAC,cAAad,EAAAC,SAEpC,IAAKjB,EAAKE,KAAK8B,OACb,MAAM,IAAIU,MAEZ3C,EAAiBC,GAyBrB,WACE,MAAQ2C,OAAQC,GAAelD,SAC5BC,cAAc,YACdkD,kBAAkBC,wBAErBC,OAAOC,SAAS,CACdC,IAAkB,IAAbL,EACLM,SAAU,U,CA/BVC,E,CACA,MAAOX,GACP3C,EAAc8B,UAAUC,IAAI,aAC5B9B,EAAc6B,UAAUW,OAAO,aAC/B9B,EAAAyB,GAASC,OAAOC,KACd,8DAEFnB,EAAAC,QAAQC,OAAOO,KAAO,EACtB3B,EAAc6B,UAAUW,OAAO,Y,KA1DnCxC,EAAcc,iBAAiB,SAqE/B,WACEhB,EAAc8B,UAAY,GAC1B5B,EAAc6B,UAAUC,IAAI,Y","sources":["src/index.js"],"sourcesContent":["import templateFunction from './templates/template.hbs';\nimport Notiflix from 'notiflix';\nimport { fetchGallery } from './js/gallery-api';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport {options} from './js/options';\n\nconst galeryFormEl = document.querySelector('#search-form');\nconst galleryListEl = document.querySelector('.gallery');\nconst loadMoreBtnEl = document.querySelector('.load-more');\nconst clearAllBtnEl = document.querySelector('.clear-all');\n\ngaleryFormEl.addEventListener('submit', handleSearchGallery);\nloadMoreBtnEl.addEventListener('click', handleLoadMoreBtnClick);\nclearAllBtnEl.addEventListener('click', clearAll);\n\nasync function handleSearchGallery(event) {\n  try {\n    event.preventDefault();\n    options.params.q = event.target.elements.searchQuery.value.trim();\n    options.params.page = 1;\n    galleryListEl.innerHTML = '';\n    // if (options.params.q.length === 0) {\n    //   Notiflix.Notify.info(\n    //     'Sorry, there are no images matching your search query. Please try again.');\n    //   // Notiflix.Notify.info('you need to enter a word to search for a photo');\n    //   return;\n    // }\n    clearAllBtnEl.classList.add('is-hidden');\n    loadMoreBtnEl.classList.add('is-hidden');\n\n    const { data } = await fetchGallery(options);\n    if (data.totalHits === 0 || options.params.q.length === 0) {\n      Notiflix.Notify.info(\n        'Sorry, there are no images matching your search query. Please try again.');\n      // Notiflix.Notify.info('you need to enter a word to search for a photo');\n      return;\n    }\n    Notiflix.Notify.info(`Hooray! We found ${data.totalHits} images.`);\n    addImagesGallery(data);\n    checkBtnClasses(data, options);\n  } catch (error) {\n    loadMoreBtnEl.classList.add('is-hidden');\n    Notiflix.Notify.info(\n      'Sorry, there are no images matching your search query. Please try again.'\n    );\n  } finally {\n    galeryFormEl.reset();\n  }\n}\n\nfunction createImagesGallery(items) {\n  return items.map(item => templateFunction(item)).join('');\n}\n\nasync function handleLoadMoreBtnClick() {\n  try {\n    options.params.page += 1;\n    const { data } = await fetchGallery(options);\n    \n    if (!data.hits.length) {\n      throw new Error();\n    }\n    addImagesGallery(data);\n    smoothScroll();\n  } catch (error) {\n    loadMoreBtnEl.classList.add('is-hidden');\n    clearAllBtnEl.classList.remove('is-hidden');\n    Notiflix.Notify.info(\n      \"We're sorry, but you've reached the end of search results.\"\n    );\n    options.params.page = 1;\n    clearAllBtnEl.classList.remove('is-hidden');\n  }\n}\n\nfunction addImagesGallery(data) {\n  const addImagesGalery = createImagesGallery(data.hits);\n  galleryListEl.insertAdjacentHTML('beforeend', addImagesGalery);\n  let gallery = new SimpleLightbox('.gallery a', { captionDelay: 250 });\n  gallery.on('show.simplelightbox');\n}\n\nfunction clearAll() {\n  galleryListEl.innerHTML = '';\n  clearAllBtnEl.classList.add('is-hidden');\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 1.5,\n    behavior: 'smooth',\n  });\n}\n\nfunction checkBtnClasses(data, options) {\n  if (data.totalHits > options.params.per_page) {\n    loadMoreBtnEl.classList.remove('is-hidden');\n  } else {\n    clearAllBtnEl.classList.remove('is-hidden');\n  }\n}\n"],"names":["$5MHIa","parcelRequire","$1f0dc3b9307be026$var$galeryFormEl","document","querySelector","$1f0dc3b9307be026$var$galleryListEl","$1f0dc3b9307be026$var$loadMoreBtnEl","$1f0dc3b9307be026$var$clearAllBtnEl","$1f0dc3b9307be026$var$addImagesGallery","data","addImagesGalery","hits","map","item","default","join","insertAdjacentHTML","$parcel$interopDefault","$fZKcF","captionDelay","on","addEventListener","async","event","preventDefault","$N0Xej","options","params","q","target","elements","searchQuery","value","trim","page","innerHTML","classList","add","$8hzAI","fetchGallery","totalHits","length","$7Y9D8","Notify","info","options1","per_page","remove","$1f0dc3b9307be026$var$checkBtnClasses","error","reset","Error","height","cardHeight","firstElementChild","getBoundingClientRect","window","scrollBy","top","behavior","$1f0dc3b9307be026$var$smoothScroll"],"version":3,"file":"index.a83b0e8c.js.map"}