{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,8EAOMC,EAAeC,SAASC,cAAc,gBACtCC,EAAgBF,SAASC,cAAc,YACvCE,EAAgBH,SAASC,cAAc,cACvCG,EAAgBJ,SAASC,cAAc,c,SAM9BI,I,OAAAA,EAAfC,EAAAT,EAAA,CAAAS,EAAAC,GAAAC,MAAA,SAAAC,EAAmCC,G,IAevBC,E,kFAbRD,EAAME,iBACNC,EAAAC,QAAQC,OAAOC,EAAIN,EAAMO,OAAOC,SAASC,YAAYC,MAAMC,OAC3DR,EAAAC,QAAQC,OAAOO,KAAO,EACtBpB,EAAcqB,UAAY,GAO1BnB,EAAcoB,UAAUC,IAAI,aAC5BtB,EAAcqB,UAAUC,IAAI,a,UAEL,EAAAC,EAAAC,cAAad,EAAAC,S,UACb,KADjBH,EAAMiB,EAAAC,KAAJlB,MACCmB,WAA+C,IAA5BjB,EAAAC,QAAQC,OAAOC,EAAEe,OAAY,C,uBACvDzB,EAAA0B,GAASC,OAAOC,KACd,4E,2BAIJ5B,EAAA0B,GAASC,OAAOC,KAAK,oBAAmCC,OAAfxB,EAAKmB,UAAU,aACxDM,EAAiBzB,GACjB0B,EAAgB1B,EAAME,EAAAC,S,kDAEtBX,EAAcqB,UAAUC,IAAI,aAC5BnB,EAAA0B,GAASC,OAAOC,KACd,4E,yBAGFnC,EAAauC,Q,8EA/BiBC,MAAAC,KAAAC,U,UAuCnBC,I,OAAAA,EAAfpC,EAAAT,EAAA,CAAAS,EAAAC,GAAAC,MAAA,SAAAC,I,IAGYE,E,kFADRE,EAAAC,QAAQC,OAAOO,MAAQ,E,UACA,EAAAI,EAAAC,cAAad,EAAAC,S,WAA9BH,EAAMiB,EAAAC,KAAJlB,MAEEgC,KAAKZ,OAAM,C,eACnB,MAAM,IAAIa,M,OAEZR,EAAiBzB,GACjBkC,I,kDAEA1C,EAAcqB,UAAUC,IAAI,aAC5BrB,EAAcoB,UAAUsB,OAAO,aAC/BxC,EAAA0B,GAASC,OAAOC,KACd,8DAEFrB,EAAAC,QAAQC,OAAOO,KAAO,EACtBlB,EAAcoB,UAAUsB,OAAO,a,2DAjBEP,MAAAC,KAAAC,U,CAqBrC,SAASL,EAAiBzB,GACxB,IAAMoC,EAAsCpC,EAAKgC,KAzBpCK,KAAI,SAAAC,G,OAAQ,EAAAC,EAAAC,SAAiBF,E,IAAOG,KAAK,IA0BtDlD,EAAcmD,mBAAmB,YAAaN,GAChC,IAAIzC,EAAAgD,GAAJ,CAAmB,aAAc,CAAEC,aAAc,MACvDC,GAAG,sB,CAQb,SAASX,IACP,IAAQY,EAAuBzD,SAC5BC,cAAc,YACdyD,kBAAkBC,wBAFbC,OAIRC,OAAOC,SAAS,CACdC,IAAkB,IAAbN,EACLO,SAAU,U,CAId,SAAS3B,EAAgB1B,EAAMsD,GACzBtD,EAAKmB,UAAYmC,EAAQlD,OAAOmD,SAClC/D,EAAcqB,UAAUsB,OAAO,aAE/B1C,EAAcoB,UAAUsB,OAAO,Y,CA3FnC/C,EAAaoE,iBAAiB,U,SAIKzD,G,OAApBL,EAAmBkC,MAAAC,KAAAC,U,IAHlCtC,EAAcgE,iBAAiB,S,kBA0ChBzB,EAAsBH,MAAAC,KAAAC,U,IAzCrCrC,EAAc+D,iBAAiB,SAqE/B,WACEjE,EAAcqB,UAAY,GAC1BnB,EAAcoB,UAAUC,IAAI,Y","sources":["src/index.js"],"sourcesContent":["import templateFunction from './templates/template.hbs';\nimport Notiflix from 'notiflix';\nimport { fetchGallery } from './js/gallery-api';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport {options} from './js/options';\n\nconst galeryFormEl = document.querySelector('#search-form');\nconst galleryListEl = document.querySelector('.gallery');\nconst loadMoreBtnEl = document.querySelector('.load-more');\nconst clearAllBtnEl = document.querySelector('.clear-all');\n\ngaleryFormEl.addEventListener('submit', handleSearchGallery);\nloadMoreBtnEl.addEventListener('click', handleLoadMoreBtnClick);\nclearAllBtnEl.addEventListener('click', clearAll);\n\nasync function handleSearchGallery(event) {\n  try {\n    event.preventDefault();\n    options.params.q = event.target.elements.searchQuery.value.trim();\n    options.params.page = 1;\n    galleryListEl.innerHTML = '';\n    // if (options.params.q.length === 0) {\n    //   Notiflix.Notify.info(\n    //     'Sorry, there are no images matching your search query. Please try again.');\n    //   // Notiflix.Notify.info('you need to enter a word to search for a photo');\n    //   return;\n    // }\n    clearAllBtnEl.classList.add('is-hidden');\n    loadMoreBtnEl.classList.add('is-hidden');\n\n    const { data } = await fetchGallery(options);\n    if (data.totalHits === 0 || options.params.q.length === 0) {\n      Notiflix.Notify.info(\n        'Sorry, there are no images matching your search query. Please try again.');\n      // Notiflix.Notify.info('you need to enter a word to search for a photo');\n      return;\n    }\n    Notiflix.Notify.info(`Hooray! We found ${data.totalHits} images.`);\n    addImagesGallery(data);\n    checkBtnClasses(data, options);\n  } catch (error) {\n    loadMoreBtnEl.classList.add('is-hidden');\n    Notiflix.Notify.info(\n      'Sorry, there are no images matching your search query. Please try again.'\n    );\n  } finally {\n    galeryFormEl.reset();\n  }\n}\n\nfunction createImagesGallery(items) {\n  return items.map(item => templateFunction(item)).join('');\n}\n\nasync function handleLoadMoreBtnClick() {\n  try {\n    options.params.page += 1;\n    const { data } = await fetchGallery(options);\n    \n    if (!data.hits.length) {\n      throw new Error();\n    }\n    addImagesGallery(data);\n    smoothScroll();\n  } catch (error) {\n    loadMoreBtnEl.classList.add('is-hidden');\n    clearAllBtnEl.classList.remove('is-hidden');\n    Notiflix.Notify.info(\n      \"We're sorry, but you've reached the end of search results.\"\n    );\n    options.params.page = 1;\n    clearAllBtnEl.classList.remove('is-hidden');\n  }\n}\n\nfunction addImagesGallery(data) {\n  const addImagesGalery = createImagesGallery(data.hits);\n  galleryListEl.insertAdjacentHTML('beforeend', addImagesGalery);\n  let gallery = new SimpleLightbox('.gallery a', { captionDelay: 250 });\n  gallery.on('show.simplelightbox');\n}\n\nfunction clearAll() {\n  galleryListEl.innerHTML = '';\n  clearAllBtnEl.classList.add('is-hidden');\n}\n\nfunction smoothScroll() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 1.5,\n    behavior: 'smooth',\n  });\n}\n\nfunction checkBtnClasses(data, options) {\n  if (data.totalHits > options.params.per_page) {\n    loadMoreBtnEl.classList.remove('is-hidden');\n  } else {\n    clearAllBtnEl.classList.remove('is-hidden');\n  }\n}\n"],"names":["$bpxeT","parcelRequire","$b8f9b7833fa37166$var$galeryFormEl","document","querySelector","$b8f9b7833fa37166$var$galleryListEl","$b8f9b7833fa37166$var$loadMoreBtnEl","$b8f9b7833fa37166$var$clearAllBtnEl","$b8f9b7833fa37166$var$_handleSearchGallery","$parcel$interopDefault","$2TvXO","mark","_callee","event","data","preventDefault","$i0xjD","options","params","q","target","elements","searchQuery","value","trim","page","innerHTML","classList","add","$gsNEY","fetchGallery","_ctx","sent","totalHits","length","$6JpON","Notify","info","concat","$b8f9b7833fa37166$var$addImagesGallery","$b8f9b7833fa37166$var$checkBtnClasses","reset","apply","this","arguments","$b8f9b7833fa37166$var$_handleLoadMoreBtnClick","hits","Error","$b8f9b7833fa37166$var$smoothScroll","remove","addImagesGalery","map","item","$gQS4W","default","join","insertAdjacentHTML","$5IjG7","captionDelay","on","cardHeight","firstElementChild","getBoundingClientRect","height","window","scrollBy","top","behavior","options1","per_page","addEventListener"],"version":3,"file":"index.21602d07.js.map"}